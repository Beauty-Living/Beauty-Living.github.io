<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>SpaceX</title>
  
  <subtitle>See You Again,See You Tomorrow</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2020-06-24T02:02:56.344Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>John Doe</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>LED control</title>
    <link href="http://yoursite.com/2020/06/24/LED-control/"/>
    <id>http://yoursite.com/2020/06/24/LED-control/</id>
    <published>2020-06-24T01:58:57.000Z</published>
    <updated>2020-06-24T02:02:56.344Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;script&gt;</span><br><span class="line">        <span class="keyword">var</span>    selected_device; <span class="comment">//选择设备</span></span><br><span class="line">        <span class="keyword">var</span>    connected_server; <span class="comment">//连接设备</span></span><br><span class="line">        <span class="keyword">var</span>    connected=<span class="literal">false</span>;<span class="comment">//连接状态</span></span><br><span class="line">        <span class="keyword">var</span>    services_discovered=<span class="literal">false</span>;<span class="comment">//发现设备状态</span></span><br><span class="line">        <span class="comment">// 添加服务和特性状态变量 </span></span><br><span class="line">        <span class="keyword">var</span> has_accelerometer_service = <span class="literal">false</span>; <span class="comment">//加速度服务状态</span></span><br><span class="line">        <span class="keyword">var</span> has_accelerometer_data = <span class="literal">false</span>; <span class="comment">//加速度特性状态</span></span><br><span class="line">        <span class="keyword">var</span> has_led_service = <span class="literal">false</span>;<span class="comment">//led服务状态</span></span><br><span class="line">        <span class="keyword">var</span> has_led_matrix_state = <span class="literal">false</span>; <span class="comment">//led控制特性状态</span></span><br><span class="line">        <span class="keyword">var</span> has_device_information_service = <span class="literal">false</span>; <span class="comment">//设备信息服务状态</span></span><br><span class="line">        <span class="keyword">var</span> has_model_name_string = <span class="literal">false</span>; <span class="comment">//设备信息特性状态</span></span><br><span class="line">        <span class="keyword">var</span> has_temperature_service =<span class="literal">false</span>;    <span class="comment">//温度服务状态</span></span><br><span class="line">        <span class="keyword">var</span> has_tem_temperature = <span class="literal">false</span>;  <span class="comment">//温度特性状态</span></span><br><span class="line">         <span class="comment">// 服务 UUIDs </span></span><br><span class="line">       ACCELEROMETER_SERVICE = <span class="string">'e95d0753-251d-470a-a062-fa1922dfa9a8'</span>; </span><br><span class="line">       LED_SERVICE = <span class="string">'e95dd91d-251d-470a-a062-fa1922dfa9a8'</span>; </span><br><span class="line">       DEVICE_INFORMATION_SERVICE = <span class="string">'0000180a-0000-1000-8000-00805f9b34fb'</span>;</span><br><span class="line">       TEMPERATURE_SERVICE = <span class="string">'e95d6100-251d-470a-a062-fa1922dfa9a8'</span>; </span><br><span class="line">       <span class="comment">// 特性 UUIDs </span></span><br><span class="line">       ACCELEROMETER_DATA = <span class="string">'e95dca4b-251d-470a-a062-fa1922dfa9a8'</span>; </span><br><span class="line">       LED_MATRIX_STATE  = <span class="string">'e95d7b77-251d-470a-a062-fa1922dfa9a8'</span>; </span><br><span class="line">       MODEL_NUMBER_STRING = <span class="string">'00002a24-0000-1000-8000-00805f9b34fb'</span>;</span><br><span class="line">       TEM_TEMPERATURE = <span class="string">'e95d1b25-251d-470a-a062-fa1922dfa9a8'</span>;  </span><br><span class="line">       <span class="comment">// 添加特性变量 </span></span><br><span class="line">       <span class="keyword">var</span> led_matrix_state; </span><br><span class="line">        <span class="keyword">var</span> model_number_string;</span><br><span class="line">        <span class="keyword">var</span> accelerometer_data;</span><br><span class="line">        <span class="keyword">var</span> tem_temperature;    </span><br><span class="line">          <span class="comment">//添加服务，特性相关参数</span></span><br><span class="line">        <span class="keyword">var</span> service_count;</span><br><span class="line">         <span class="keyword">var</span> services_discovered;</span><br><span class="line">         <span class="keyword">var</span> characteristics_discovered;  </span><br><span class="line">         <span class="keyword">var</span> characteristic_count ;               </span><br><span class="line">         <span class="function"><span class="keyword">function</span> <span class="title">discoverOrdisconnectDevices</span>(<span class="params"></span>)// 断开连接</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"discoverOrdisconnectDevices"</span>);</span><br><span class="line">            <span class="keyword">if</span>(!connected)</span><br><span class="line">            discoverDevices();</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                selected_device.gatt.disconnect();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">onDisconnected</span>(<span class="params"></span>)//连接</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"onDisconnected"</span>);</span><br><span class="line">            resetUI();</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//function input.temperature(): number;</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">discoverDevices</span>(<span class="params"></span>)// 搜索设备函数</span></span><br><span class="line"><span class="function">        </span>&#123; </span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"discoverDevices"</span>);</span><br><span class="line">            <span class="keyword">var</span> options = &#123;<span class="attr">acceptAllDevices</span>:<span class="literal">true</span>,</span><br><span class="line">                optionalServices: [DEVICE_INFORMATION_SERVICE, ACCELEROMETER_SERVICE, LED_SERVICE,TEMPERATURE_SERVICE]  <span class="comment">//在第5节课上添加</span></span><br><span class="line">            &#125;        <span class="comment">//发现所有周边蓝牙设备</span></span><br><span class="line">           </span><br><span class="line">            navigator.bluetooth.requestDevice(options)</span><br><span class="line">            .then(<span class="function"><span class="params">device</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'&gt; Name:'</span> + device.name);</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'&gt; Id:'</span> + device.id);</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'&gt; Connected:'</span> + device.gatt.connected);</span><br><span class="line">                selected_device = device;</span><br><span class="line">                <span class="built_in">console</span>.log(selected_device);</span><br><span class="line">                connect();</span><br><span class="line">                &#125;)</span><br><span class="line">            .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">                alert(<span class="string">'ERROR'</span> +error);</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'ERROR'</span> +error);</span><br><span class="line">                &#125;);       </span><br><span class="line">        &#125;       </span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">connect</span>(<span class="params"></span>)//连接函数</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"connecting"</span>);</span><br><span class="line">            selected_device.gatt.connect()</span><br><span class="line">            .then(</span><br><span class="line">                <span class="function"><span class="keyword">function</span> (<span class="params">server</span>)</span></span><br><span class="line"><span class="function">                </span>&#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"Connected to"</span> + server.device.id);</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"Connected "</span> + server.connected);</span><br><span class="line">                    selected_device.addEventListener(<span class="string">'gattserverdisconnected'</span>,onDisconnected);</span><br><span class="line">                    connected_server =server;</span><br><span class="line">                    discoverSvcsAndChars(); <span class="comment">//在第5课基础上添加的函数</span></span><br><span class="line">                    setConnectedStatus(<span class="literal">true</span>);</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="function"><span class="keyword">function</span> (<span class="params">error</span>)</span></span><br><span class="line"><span class="function">                </span>&#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"ERROR:could not connct-"</span> + error);</span><br><span class="line">                   alert(<span class="string">"ERROR:could not connct-"</span> + error);</span><br><span class="line">                   setConnectedStatus(<span class="literal">false</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">setConnectedStatus</span>(<span class="params">status</span>)//设置连接状态</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            connected=status;</span><br><span class="line">            <span class="built_in">document</span>.getElementById(<span class="string">'status_connected'</span>).innerHTML = status;</span><br><span class="line">            <span class="keyword">if</span>(status==<span class="literal">true</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">document</span>.getElementById(<span class="string">'btn_scan'</span>).innerHTML = <span class="string">"Disconnect"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">document</span>.getElementById(<span class="string">'btn_scan'</span>).innerHTML = <span class="string">"Discover Devices"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">setDiscoveryStatus</span>(<span class="params">status</span>)//设置发现状态</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            services_discovered=status;</span><br><span class="line">            <span class="built_in">document</span>.getElementById(<span class="string">'status_discovered'</span>).innerHTML=status;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">resetUI</span>(<span class="params"></span>)//重置页面</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            setConnectedStatus(<span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">discoverSvcsAndChars</span>(<span class="params"></span>)    //发现服务和特性</span></span><br><span class="line"><span class="function">        </span>&#123;  </span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"discoverSvcsAndChars server="</span> + connected_server); </span><br><span class="line">            connected_server.getPrimaryServices()</span><br><span class="line">            .then(<span class="function"><span class="params">services</span> =&gt;</span> </span><br><span class="line">            &#123;    </span><br><span class="line">                    has_accelerometer_service = <span class="literal">false</span>;    </span><br><span class="line">                    has_led_service = <span class="literal">false</span>;    </span><br><span class="line">                    has_device_information_service = <span class="literal">false</span>; </span><br><span class="line">                    has_temperature_service= <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">                    services_discovered = <span class="number">0</span>;    </span><br><span class="line">                    service_count = services.length;    </span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"Got "</span> + service_count + <span class="string">" services"</span>); </span><br><span class="line">        </span><br><span class="line">                    services.forEach(<span class="function"><span class="params">service</span> =&gt;</span> </span><br><span class="line">                    &#123;     </span><br><span class="line">                        <span class="keyword">if</span> (service.uuid == ACCELEROMETER_SERVICE)</span><br><span class="line">                        &#123;      </span><br><span class="line">                            has_accelerometer_service = <span class="literal">true</span>;    </span><br><span class="line">                        &#125;   </span><br><span class="line">                        <span class="keyword">if</span> (service.uuid == LED_SERVICE) </span><br><span class="line">                        &#123;      </span><br><span class="line">                            has_led_service = <span class="literal">true</span>;     </span><br><span class="line">                        &#125;     </span><br><span class="line">                       <span class="keyword">if</span> (service.uuid == DEVICE_INFORMATION_SERVICE) </span><br><span class="line">                        &#123;      </span><br><span class="line">                            has_device_information_service = <span class="literal">true</span>;     </span><br><span class="line">                        &#125; </span><br><span class="line">                        <span class="keyword">if</span> (service.uuid == TEMPERATURE_SERVICE) <span class="comment">//温度</span></span><br><span class="line">                        &#123;      </span><br><span class="line">                            has_temperature_service = <span class="literal">true</span>;     </span><br><span class="line">                        &#125;        </span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">'Getting Characteristics for service '</span> + service.uuid);     </span><br><span class="line">                        service.getCharacteristics()</span><br><span class="line">                        .then(<span class="function"><span class="params">characteristics</span> =&gt;</span> </span><br><span class="line">                        &#123;      </span><br><span class="line">                            <span class="built_in">console</span>.log(<span class="string">'&gt; Service: '</span> + service.uuid);      </span><br><span class="line">                            services_discovered++;     </span><br><span class="line">                            characteristics_discovered = <span class="number">0</span>;      </span><br><span class="line">                            characteristic_count = characteristics.length;      </span><br><span class="line">                            characteristics.forEach(<span class="function"><span class="params">characteristic</span> =&gt;</span> </span><br><span class="line">                            &#123;       </span><br><span class="line">                                characteristics_discovered++;       </span><br><span class="line">                                <span class="built_in">console</span>.log(<span class="string">'&gt;&gt; Characteristic: '</span> + characteristic.uuid);       </span><br><span class="line">                                <span class="keyword">if</span> (characteristic.uuid == ACCELEROMETER_DATA)</span><br><span class="line">                                &#123;        </span><br><span class="line">                                    accelerometer_data = characteristic;        </span><br><span class="line">                                    has_accelerometer_data = <span class="literal">true</span>;       </span><br><span class="line">                                &#125;      </span><br><span class="line">                                <span class="keyword">if</span> (characteristic.uuid == LED_MATRIX_STATE) </span><br><span class="line">                                &#123;        </span><br><span class="line">                                    led_matrix_state = characteristic;        </span><br><span class="line">                                    has_led_matrix_state = <span class="literal">true</span>;       </span><br><span class="line">                                &#125;       </span><br><span class="line">                                <span class="keyword">if</span> (characteristic.uuid == MODEL_NUMBER_STRING) </span><br><span class="line">                                &#123;        </span><br><span class="line">                                    model_number_string = characteristic;        </span><br><span class="line">                                    has_model_name_string = <span class="literal">true</span>;       </span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">if</span>(characteristic.uuid == TEM_TEMPERATURE)  <span class="comment">//温度</span></span><br><span class="line">                                &#123;</span><br><span class="line">                                    tem_temperature = characteristic; </span><br><span class="line">                                    has_tem_temperature = <span class="literal">true</span>;</span><br><span class="line">                                &#125;     </span><br><span class="line">                                <span class="keyword">if</span> (services_discovered == service_count &amp;&amp; characteristics_discovered == characteristic_count) </span><br><span class="line">                                &#123;        </span><br><span class="line">                                    <span class="built_in">console</span>.log(<span class="string">"FINISHED DISCOVERY"</span>); </span><br><span class="line">                                    setDiscoveryStatus(<span class="literal">true</span>);       </span><br><span class="line">                                    <span class="comment">//setDiscoveryStatus(true);                  </span></span><br><span class="line">                                &#125;    </span><br><span class="line">                            &#125;);     </span><br><span class="line">                        &#125;);    </span><br><span class="line">                    &#125;);  </span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;  </span><br><span class="line"><span class="keyword">var</span> i=<span class="number">0</span>,j=<span class="number">0</span>;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">randomLEDs</span>(<span class="params">ct</span>)   //控制<span class="title">led</span></span></span><br><span class="line"><span class="function">        </span>&#123;  </span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"randomLEDs"</span>);   </span><br><span class="line">            <span class="comment">// state validation   </span></span><br><span class="line">            <span class="keyword">if</span> (!connected) </span><br><span class="line">            &#123;     </span><br><span class="line">                alert(<span class="string">"Error: Discover and connect to a device before using this function"</span>);     </span><br><span class="line">                <span class="keyword">return</span>;   </span><br><span class="line">            &#125;   </span><br><span class="line">            <span class="keyword">if</span> (!services_discovered) </span><br><span class="line">            &#123;     </span><br><span class="line">                alert(<span class="string">"Error: Service discovery has not yet completed"</span>);     </span><br><span class="line">                <span class="keyword">return</span>;  </span><br><span class="line">            &#125;   </span><br><span class="line">            <span class="keyword">if</span> (!has_led_service) </span><br><span class="line">            &#123;     </span><br><span class="line">                alert(<span class="string">"Error: The connected device does not contain the LED service"</span>);     </span><br><span class="line">                <span class="keyword">return</span>;  </span><br><span class="line">            &#125;   </span><br><span class="line">            <span class="keyword">if</span> (!has_led_matrix_state) </span><br><span class="line">            &#123;      </span><br><span class="line">                alert(<span class="string">"Error: The connected device does not contain the LED matrix state characteristic"</span>);      </span><br><span class="line">                <span class="keyword">return</span>;   </span><br><span class="line">            &#125;   </span><br><span class="line"><span class="keyword">var</span> led_array=[];</span><br><span class="line"><span class="keyword">if</span>(ct==<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"> led_array[<span class="number">0</span>] =<span class="number">1</span>&lt;&lt;i;</span><br><span class="line"> led_array[<span class="number">1</span>] = <span class="number">1</span>&lt;&lt;i;   </span><br><span class="line"> led_array[<span class="number">2</span>] = <span class="number">1</span>&lt;&lt;i;   </span><br><span class="line"> led_array[<span class="number">3</span>] = <span class="number">1</span>&lt;&lt;i;   </span><br><span class="line"> led_array[<span class="number">4</span>] = <span class="number">1</span>&lt;&lt;i;</span><br><span class="line"> i++;</span><br><span class="line"> <span class="keyword">if</span>(i==<span class="number">5</span>)i=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(ct==<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">led_array[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">led_array[<span class="number">1</span>] = <span class="number">0</span>;   </span><br><span class="line">led_array[<span class="number">2</span>] = <span class="number">0</span>;   </span><br><span class="line">led_array[<span class="number">3</span>] = <span class="number">0</span>;   </span><br><span class="line">led_array[<span class="number">4</span>] = <span class="number">0</span>;</span><br><span class="line">led_array[j] = <span class="number">31</span>;</span><br><span class="line">j++;</span><br><span class="line"><span class="keyword">if</span>(j==<span class="number">5</span>)j=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">             <span class="comment">// Math.random():0~1  Math.floor(x):返回小于等于x的最大整数</span></span><br><span class="line">            <span class="comment">/*led_array[0] =10;  </span></span><br><span class="line"><span class="comment">            led_array[1] = 31;   </span></span><br><span class="line"><span class="comment">            led_array[2] = 31;   </span></span><br><span class="line"><span class="comment">            led_array[3] = 14;   </span></span><br><span class="line"><span class="comment">            led_array[4] = 4;*/</span></span><br><span class="line">            <span class="comment">/*led_array[0] = 31;  </span></span><br><span class="line"><span class="comment">            led_array[1] = 17;   </span></span><br><span class="line"><span class="comment">            led_array[2] = 17;   </span></span><br><span class="line"><span class="comment">            led_array[3] = 17;   </span></span><br><span class="line"><span class="comment">            led_array[4] = 31; */</span></span><br><span class="line"> </span><br><span class="line">            <span class="keyword">var</span> led_matrix_data = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(led_array); </span><br><span class="line"></span><br><span class="line">            led_matrix_state.writeValue(led_matrix_data.buffer)</span><br><span class="line">            .then(<span class="function"><span class="params">_</span> =&gt;</span> &#123;   </span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'LED matrix state changed'</span>);  </span><br><span class="line">                &#125;)  </span><br><span class="line">            .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;   </span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'Error: '</span> + error);   </span><br><span class="line">                alert(<span class="string">'Error: '</span> + error);   <span class="keyword">return</span>;  </span><br><span class="line">                &#125;); </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">readModelNumber</span>(<span class="params"></span>)  // 蓝牙信息服务</span></span><br><span class="line"><span class="function">        </span>&#123;  </span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"readModelNumber"</span>);   </span><br><span class="line">            <span class="comment">// state validation   </span></span><br><span class="line">            <span class="keyword">if</span> (!connected) </span><br><span class="line">            &#123;     </span><br><span class="line">                alert(<span class="string">"Error: Discover and connect to a device before using this function"</span>);     </span><br><span class="line">                <span class="keyword">return</span>;   </span><br><span class="line">            &#125;   </span><br><span class="line">            <span class="keyword">if</span> (!services_discovered) </span><br><span class="line">            &#123;     </span><br><span class="line">                alert(<span class="string">"Error: Service discovery has not yet completed"</span>);     </span><br><span class="line">                <span class="keyword">return</span>;   </span><br><span class="line">            &#125;    </span><br><span class="line">            <span class="keyword">if</span> (!has_device_information_service) </span><br><span class="line">            &#123;     </span><br><span class="line">                alert(<span class="string">"Error: The connected device does not contain the device information service"</span>);     </span><br><span class="line">                <span class="keyword">return</span>;   </span><br><span class="line">            &#125;   </span><br><span class="line">            <span class="keyword">if</span> (!has_model_name_string) </span><br><span class="line">            &#123;     </span><br><span class="line">                alert(<span class="string">"Error: The connected device does not contain the model name string characteristic"</span>);     </span><br><span class="line">                <span class="keyword">return</span>;   </span><br><span class="line">            &#125;   </span><br><span class="line">            </span><br><span class="line">            model_number_string.readValue()</span><br><span class="line">            .then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;   </span><br><span class="line">                data = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(value.buffer);   </span><br><span class="line">                model_number_string = <span class="keyword">new</span> TextDecoder(<span class="string">"utf-8"</span>).decode(data);  </span><br><span class="line">                <span class="built_in">console</span>.log(model_number_string);   </span><br><span class="line">                <span class="built_in">document</span>.getElementById(<span class="string">"model_number"</span>).innerHTML = model_number_string;  </span><br><span class="line">                &#125;)  </span><br><span class="line">            .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;  </span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'Error: '</span> + error);   </span><br><span class="line">                alert(<span class="string">'Error: '</span> + error);   </span><br><span class="line">                <span class="keyword">return</span>;  </span><br><span class="line">                &#125;); </span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">accelerometer</span>(<span class="params"></span>)   //加速度传感器</span></span><br><span class="line"><span class="function"> </span>&#123;  </span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">"accelerometer"</span>);   </span><br><span class="line">     <span class="comment">// state validation   </span></span><br><span class="line">     <span class="keyword">if</span> (!connected) </span><br><span class="line">     &#123;     </span><br><span class="line">         alert(<span class="string">"Error: Discover and connect to a device before using this function"</span>);     </span><br><span class="line">         <span class="keyword">return</span>;   </span><br><span class="line">     &#125;   </span><br><span class="line">     <span class="keyword">if</span> (!services_discovered) </span><br><span class="line">     &#123;     </span><br><span class="line">         alert(<span class="string">"Error: Service discovery has not yet completed"</span>);     </span><br><span class="line">         <span class="keyword">return</span>;  </span><br><span class="line">     &#125;   </span><br><span class="line">     <span class="keyword">if</span> (!has_accelerometer_service) </span><br><span class="line">     &#123;     </span><br><span class="line">         alert(<span class="string">"Error: The connected device does not contain the accelerometer service"</span>);     </span><br><span class="line">         <span class="keyword">return</span>;  </span><br><span class="line">     &#125;   </span><br><span class="line">     <span class="keyword">if</span> (!has_accelerometer_data) </span><br><span class="line">     &#123;      </span><br><span class="line">         alert(<span class="string">"Error: The connected device does not contain the accelerometer_data characteristic"</span>);      </span><br><span class="line">         <span class="keyword">return</span>;   </span><br><span class="line">     &#125;   </span><br><span class="line"> </span><br><span class="line">     accelerometer_data.readValue()</span><br><span class="line">    .then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">      buffer = value.buffer;</span><br><span class="line">      dataview = <span class="keyword">new</span> <span class="built_in">DataView</span>(buffer);</span><br><span class="line">      X = dataview.getUint16(<span class="number">0</span>, <span class="literal">true</span>);</span><br><span class="line">      Y = dataview.getUint16(<span class="number">2</span>, <span class="literal">true</span>);</span><br><span class="line">      Z = dataview.getUint16(<span class="number">4</span>, <span class="literal">true</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"X="</span> + X + <span class="string">", Y="</span> + Y + <span class="string">", Z+"</span> + Z);</span><br><span class="line">      <span class="built_in">document</span>.getElementById(<span class="string">"ac_data"</span>).innerHTML = <span class="string">"X="</span> + X + <span class="string">", Y="</span> + Y + <span class="string">",Z="</span> + Z;</span><br><span class="line">        &#125;)  </span><br><span class="line">    .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;  </span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Error: '</span> + error);   </span><br><span class="line">        alert(<span class="string">'Error: '</span> + error);   </span><br><span class="line">        <span class="keyword">return</span>;  </span><br><span class="line">        &#125;); </span><br><span class="line">        </span><br><span class="line">       </span><br><span class="line"> &#125;  </span><br><span class="line"> </span><br><span class="line">        &lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">       &lt;/</span>html&gt;</span><br></pre></td></tr></table></figure><p>以上为功能实现部分</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>  Status</span><br><span class="line">      <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span>&gt;</span>     <span class="tag">&lt;<span class="name">b</span>&gt;</span>Connected<span class="tag">&lt;/<span class="name">b</span>&gt;</span>   <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span>&gt;</span>     <span class="tag">&lt;<span class="name">b</span>&gt;</span>Service Discovery Completed<span class="tag">&lt;/<span class="name">b</span>&gt;</span>   <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span> <span class="attr">id</span>=<span class="string">"status_connected"</span>&gt;</span> false <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span> <span class="attr">id</span>=<span class="string">"status_discovered"</span>&gt;</span> false <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><br><span class="line">          Device Discovery or Disconnect</span><br><span class="line">      <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span> = <span class="string">"btn_scan"</span> <span class="attr">onclick</span>=<span class="string">"discoverOrdisconnectDevices()"</span>&gt;</span>Start scan<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Reading and Writing<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Write Characteristic - Randomise Lights<span class="tag">&lt;/<span class="name">h3</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn_write"</span> <span class="attr">onclick</span>=<span class="string">"randomLEDs(0)"</span>&gt;</span>控制led行<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btu_write"</span> <span class="attr">onclick</span>=<span class="string">"randomLEDs(1)"</span>&gt;</span>控制led列<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Read Characteristic - Model number<span class="tag">&lt;/<span class="name">h3</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn_read"</span> <span class="attr">onclick</span>=<span class="string">"readModelNumber()"</span>&gt;</span>Read Model number<span class="tag">&lt;/<span class="name">button</span>&gt;</span> </span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"model_number"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>accelerometer_data<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn_readAC"</span> <span class="attr">onclick</span>=<span class="string">"accelerometer()"</span>&gt;</span>Read accelerometer_data<span class="tag">&lt;/<span class="name">button</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"ac_data"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>以上为UI界面设计部分</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>加速度器</title>
    <link href="http://yoursite.com/2020/06/24/%E5%8A%A0%E9%80%9F%E5%BA%A6%E5%99%A8/"/>
    <id>http://yoursite.com/2020/06/24/%E5%8A%A0%E9%80%9F%E5%BA%A6%E5%99%A8/</id>
    <published>2020-06-24T01:58:32.000Z</published>
    <updated>2020-06-24T02:05:21.225Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>功能实现部分：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;script&gt;</span><br><span class="line">        <span class="keyword">var</span>    selected_device; <span class="comment">//选择设备</span></span><br><span class="line">        <span class="keyword">var</span>    connected_server; <span class="comment">//连接设备</span></span><br><span class="line">        <span class="keyword">var</span>    connected=<span class="literal">false</span>;<span class="comment">//连接状态</span></span><br><span class="line">        <span class="keyword">var</span>    services_discovered=<span class="literal">false</span>;<span class="comment">//发现设备状态</span></span><br><span class="line">        <span class="comment">// 添加服务和特性状态变量 </span></span><br><span class="line">        <span class="keyword">var</span> has_accelerometer_service = <span class="literal">false</span>; <span class="comment">//加速度服务状态</span></span><br><span class="line">        <span class="keyword">var</span> has_accelerometer_data = <span class="literal">false</span>; <span class="comment">//加速度特性状态</span></span><br><span class="line">        <span class="keyword">var</span> has_led_service = <span class="literal">false</span>;<span class="comment">//led服务状态</span></span><br><span class="line">        <span class="keyword">var</span> has_led_matrix_state = <span class="literal">false</span>; <span class="comment">//led控制特性状态</span></span><br><span class="line">        <span class="keyword">var</span> has_device_information_service = <span class="literal">false</span>; <span class="comment">//设备信息服务状态</span></span><br><span class="line">        <span class="keyword">var</span> has_model_name_string = <span class="literal">false</span>; <span class="comment">//设备信息特性状态</span></span><br><span class="line">        <span class="keyword">var</span> has_temperature_service =<span class="literal">false</span>;    <span class="comment">//温度服务状态</span></span><br><span class="line">        <span class="keyword">var</span> has_tem_temperature = <span class="literal">false</span>;  <span class="comment">//温度特性状态</span></span><br><span class="line">         <span class="comment">// 服务 UUIDs </span></span><br><span class="line">       ACCELEROMETER_SERVICE = <span class="string">'e95d0753-251d-470a-a062-fa1922dfa9a8'</span>; </span><br><span class="line">       LED_SERVICE = <span class="string">'e95dd91d-251d-470a-a062-fa1922dfa9a8'</span>; </span><br><span class="line">       DEVICE_INFORMATION_SERVICE = <span class="string">'0000180a-0000-1000-8000-00805f9b34fb'</span>;</span><br><span class="line">       TEMPERATURE_SERVICE = <span class="string">'e95d6100-251d-470a-a062-fa1922dfa9a8'</span>; </span><br><span class="line">       <span class="comment">// 特性 UUIDs </span></span><br><span class="line">       ACCELEROMETER_DATA = <span class="string">'e95dca4b-251d-470a-a062-fa1922dfa9a8'</span>; </span><br><span class="line">       LED_MATRIX_STATE  = <span class="string">'e95d7b77-251d-470a-a062-fa1922dfa9a8'</span>; </span><br><span class="line">       MODEL_NUMBER_STRING = <span class="string">'00002a24-0000-1000-8000-00805f9b34fb'</span>;</span><br><span class="line">       TEM_TEMPERATURE = <span class="string">'e95d1b25-251d-470a-a062-fa1922dfa9a8'</span>;  </span><br><span class="line">       <span class="comment">// 添加特性变量 </span></span><br><span class="line">       <span class="keyword">var</span> led_matrix_state; </span><br><span class="line">        <span class="keyword">var</span> model_number_string;</span><br><span class="line">        <span class="keyword">var</span> accelerometer_data;</span><br><span class="line">        <span class="keyword">var</span> tem_temperature;    </span><br><span class="line">          <span class="comment">//添加服务，特性相关参数</span></span><br><span class="line">        <span class="keyword">var</span> service_count;</span><br><span class="line">         <span class="keyword">var</span> services_discovered;</span><br><span class="line">         <span class="keyword">var</span> characteristics_discovered;  </span><br><span class="line">         <span class="keyword">var</span> characteristic_count ;               </span><br><span class="line">         <span class="function"><span class="keyword">function</span> <span class="title">discoverOrdisconnectDevices</span>(<span class="params"></span>)// 断开连接</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"discoverOrdisconnectDevices"</span>);</span><br><span class="line">            <span class="keyword">if</span>(!connected)</span><br><span class="line">            discoverDevices();</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                selected_device.gatt.disconnect();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">onDisconnected</span>(<span class="params"></span>)//连接</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"onDisconnected"</span>);</span><br><span class="line">            resetUI();</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//function input.temperature(): number;</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">discoverDevices</span>(<span class="params"></span>)// 搜索设备函数</span></span><br><span class="line"><span class="function">        </span>&#123; </span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"discoverDevices"</span>);</span><br><span class="line">            <span class="keyword">var</span> options = &#123;<span class="attr">acceptAllDevices</span>:<span class="literal">true</span>,</span><br><span class="line">                optionalServices: [DEVICE_INFORMATION_SERVICE, ACCELEROMETER_SERVICE, LED_SERVICE,TEMPERATURE_SERVICE]  <span class="comment">//在第5节课上添加</span></span><br><span class="line">            &#125;        <span class="comment">//发现所有周边蓝牙设备</span></span><br><span class="line">           </span><br><span class="line">            navigator.bluetooth.requestDevice(options)</span><br><span class="line">            .then(<span class="function"><span class="params">device</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'&gt; Name:'</span> + device.name);</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'&gt; Id:'</span> + device.id);</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'&gt; Connected:'</span> + device.gatt.connected);</span><br><span class="line">                selected_device = device;</span><br><span class="line">                <span class="built_in">console</span>.log(selected_device);</span><br><span class="line">                connect();</span><br><span class="line">                &#125;)</span><br><span class="line">            .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">                alert(<span class="string">'ERROR'</span> +error);</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'ERROR'</span> +error);</span><br><span class="line">                &#125;);       </span><br><span class="line">        &#125;       </span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">connect</span>(<span class="params"></span>)//连接函数</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"connecting"</span>);</span><br><span class="line">            selected_device.gatt.connect()</span><br><span class="line">            .then(</span><br><span class="line">                <span class="function"><span class="keyword">function</span> (<span class="params">server</span>)</span></span><br><span class="line"><span class="function">                </span>&#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"Connected to"</span> + server.device.id);</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"Connected "</span> + server.connected);</span><br><span class="line">                    selected_device.addEventListener(<span class="string">'gattserverdisconnected'</span>,onDisconnected);</span><br><span class="line">                    connected_server =server;</span><br><span class="line">                    discoverSvcsAndChars(); <span class="comment">//在第5课基础上添加的函数</span></span><br><span class="line">                    setConnectedStatus(<span class="literal">true</span>);</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="function"><span class="keyword">function</span> (<span class="params">error</span>)</span></span><br><span class="line"><span class="function">                </span>&#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"ERROR:could not connct-"</span> + error);</span><br><span class="line">                   alert(<span class="string">"ERROR:could not connct-"</span> + error);</span><br><span class="line">                   setConnectedStatus(<span class="literal">false</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">setConnectedStatus</span>(<span class="params">status</span>)//设置连接状态</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            connected=status;</span><br><span class="line">            <span class="built_in">document</span>.getElementById(<span class="string">'status_connected'</span>).innerHTML = status;</span><br><span class="line">            <span class="keyword">if</span>(status==<span class="literal">true</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">document</span>.getElementById(<span class="string">'btn_scan'</span>).innerHTML = <span class="string">"Disconnect"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">document</span>.getElementById(<span class="string">'btn_scan'</span>).innerHTML = <span class="string">"Discover Devices"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">setDiscoveryStatus</span>(<span class="params">status</span>)//设置发现状态</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            services_discovered=status;</span><br><span class="line">            <span class="built_in">document</span>.getElementById(<span class="string">'status_discovered'</span>).innerHTML=status;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">resetUI</span>(<span class="params"></span>)//重置页面</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            setConnectedStatus(<span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">discoverSvcsAndChars</span>(<span class="params"></span>)    //发现服务和特性</span></span><br><span class="line"><span class="function">        </span>&#123;  </span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"discoverSvcsAndChars server="</span> + connected_server); </span><br><span class="line">            connected_server.getPrimaryServices()</span><br><span class="line">            .then(<span class="function"><span class="params">services</span> =&gt;</span> </span><br><span class="line">            &#123;    </span><br><span class="line">                    has_accelerometer_service = <span class="literal">false</span>;    </span><br><span class="line">                    has_led_service = <span class="literal">false</span>;    </span><br><span class="line">                    has_device_information_service = <span class="literal">false</span>; </span><br><span class="line">                    has_temperature_service= <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">                    services_discovered = <span class="number">0</span>;    </span><br><span class="line">                    service_count = services.length;    </span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"Got "</span> + service_count + <span class="string">" services"</span>); </span><br><span class="line">        </span><br><span class="line">                    services.forEach(<span class="function"><span class="params">service</span> =&gt;</span> </span><br><span class="line">                    &#123;     </span><br><span class="line">                        <span class="keyword">if</span> (service.uuid == ACCELEROMETER_SERVICE)</span><br><span class="line">                        &#123;      </span><br><span class="line">                            has_accelerometer_service = <span class="literal">true</span>;    </span><br><span class="line">                        &#125;   </span><br><span class="line">                        <span class="keyword">if</span> (service.uuid == LED_SERVICE) </span><br><span class="line">                        &#123;      </span><br><span class="line">                            has_led_service = <span class="literal">true</span>;     </span><br><span class="line">                        &#125;     </span><br><span class="line">                       <span class="keyword">if</span> (service.uuid == DEVICE_INFORMATION_SERVICE) </span><br><span class="line">                        &#123;      </span><br><span class="line">                            has_device_information_service = <span class="literal">true</span>;     </span><br><span class="line">                        &#125; </span><br><span class="line">                        <span class="keyword">if</span> (service.uuid == TEMPERATURE_SERVICE) <span class="comment">//温度</span></span><br><span class="line">                        &#123;      </span><br><span class="line">                            has_temperature_service = <span class="literal">true</span>;     </span><br><span class="line">                        &#125;        </span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">'Getting Characteristics for service '</span> + service.uuid);     </span><br><span class="line">                        service.getCharacteristics()</span><br><span class="line">                        .then(<span class="function"><span class="params">characteristics</span> =&gt;</span> </span><br><span class="line">                        &#123;      </span><br><span class="line">                            <span class="built_in">console</span>.log(<span class="string">'&gt; Service: '</span> + service.uuid);      </span><br><span class="line">                            services_discovered++;     </span><br><span class="line">                            characteristics_discovered = <span class="number">0</span>;      </span><br><span class="line">                            characteristic_count = characteristics.length;      </span><br><span class="line">                            characteristics.forEach(<span class="function"><span class="params">characteristic</span> =&gt;</span> </span><br><span class="line">                            &#123;       </span><br><span class="line">                                characteristics_discovered++;       </span><br><span class="line">                                <span class="built_in">console</span>.log(<span class="string">'&gt;&gt; Characteristic: '</span> + characteristic.uuid);       </span><br><span class="line">                                <span class="keyword">if</span> (characteristic.uuid == ACCELEROMETER_DATA)</span><br><span class="line">                                &#123;        </span><br><span class="line">                                    accelerometer_data = characteristic;        </span><br><span class="line">                                    has_accelerometer_data = <span class="literal">true</span>;       </span><br><span class="line">                                &#125;      </span><br><span class="line">                                <span class="keyword">if</span> (characteristic.uuid == LED_MATRIX_STATE) </span><br><span class="line">                                &#123;        </span><br><span class="line">                                    led_matrix_state = characteristic;        </span><br><span class="line">                                    has_led_matrix_state = <span class="literal">true</span>;       </span><br><span class="line">                                &#125;       </span><br><span class="line">                                <span class="keyword">if</span> (characteristic.uuid == MODEL_NUMBER_STRING) </span><br><span class="line">                                &#123;        </span><br><span class="line">                                    model_number_string = characteristic;        </span><br><span class="line">                                    has_model_name_string = <span class="literal">true</span>;       </span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">if</span>(characteristic.uuid == TEM_TEMPERATURE)  <span class="comment">//温度</span></span><br><span class="line">                                &#123;</span><br><span class="line">                                    tem_temperature = characteristic; </span><br><span class="line">                                    has_tem_temperature = <span class="literal">true</span>;</span><br><span class="line">                                &#125;     </span><br><span class="line">                                <span class="keyword">if</span> (services_discovered == service_count &amp;&amp; characteristics_discovered == characteristic_count) </span><br><span class="line">                                &#123;        </span><br><span class="line">                                    <span class="built_in">console</span>.log(<span class="string">"FINISHED DISCOVERY"</span>); </span><br><span class="line">                                    setDiscoveryStatus(<span class="literal">true</span>);       </span><br><span class="line">                                    <span class="comment">//setDiscoveryStatus(true);                  </span></span><br><span class="line">                                &#125;    </span><br><span class="line">                            &#125;);     </span><br><span class="line">                        &#125;);    </span><br><span class="line">                    &#125;);  </span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;  </span><br><span class="line"><span class="keyword">var</span> i=<span class="number">0</span>;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">randomLEDs</span>(<span class="params"></span>)   //控制<span class="title">led</span></span></span><br><span class="line"><span class="function">        </span>&#123;  </span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"randomLEDs"</span>);   </span><br><span class="line">            <span class="comment">// state validation   </span></span><br><span class="line">            <span class="keyword">if</span> (!connected) </span><br><span class="line">            &#123;     </span><br><span class="line">                alert(<span class="string">"Error: Discover and connect to a device before using this function"</span>);     </span><br><span class="line">                <span class="keyword">return</span>;   </span><br><span class="line">            &#125;   </span><br><span class="line">            <span class="keyword">if</span> (!services_discovered) </span><br><span class="line">            &#123;     </span><br><span class="line">                alert(<span class="string">"Error: Service discovery has not yet completed"</span>);     </span><br><span class="line">                <span class="keyword">return</span>;  </span><br><span class="line">            &#125;   </span><br><span class="line">            <span class="keyword">if</span> (!has_led_service) </span><br><span class="line">            &#123;     </span><br><span class="line">                alert(<span class="string">"Error: The connected device does not contain the LED service"</span>);     </span><br><span class="line">                <span class="keyword">return</span>;  </span><br><span class="line">            &#125;   </span><br><span class="line">            <span class="keyword">if</span> (!has_led_matrix_state) </span><br><span class="line">            &#123;      </span><br><span class="line">                alert(<span class="string">"Error: The connected device does not contain the LED matrix state characteristic"</span>);      </span><br><span class="line">                <span class="keyword">return</span>;   </span><br><span class="line">            &#125;   </span><br><span class="line">            <span class="keyword">var</span> led_array=[];</span><br><span class="line"> <span class="keyword">if</span>(i==<span class="number">0</span>)</span><br><span class="line"> &#123;</span><br><span class="line"> led_array[<span class="number">0</span>] =<span class="number">10</span>;</span><br><span class="line"> led_array[<span class="number">1</span>] = <span class="number">31</span>;   </span><br><span class="line"> led_array[<span class="number">2</span>] = <span class="number">31</span>;   </span><br><span class="line"> led_array[<span class="number">3</span>] = <span class="number">14</span>;   </span><br><span class="line"> led_array[<span class="number">4</span>] = <span class="number">4</span>;</span><br><span class="line"> i++;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line"> &#123;</span><br><span class="line"> led_array[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line"> led_array[<span class="number">1</span>] = <span class="number">0</span>;   </span><br><span class="line"> led_array[<span class="number">2</span>] = <span class="number">0</span>;   </span><br><span class="line"> led_array[<span class="number">3</span>] = <span class="number">0</span>;   </span><br><span class="line"> led_array[<span class="number">4</span>] = <span class="number">0</span>;</span><br><span class="line"> i=<span class="number">0</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">             <span class="comment">// Math.random():0~1  Math.floor(x):返回小于等于x的最大整数</span></span><br><span class="line">            <span class="comment">/*led_array[0] =10;  </span></span><br><span class="line"><span class="comment">            led_array[1] = 31;   </span></span><br><span class="line"><span class="comment">            led_array[2] = 31;   </span></span><br><span class="line"><span class="comment">            led_array[3] = 14;   </span></span><br><span class="line"><span class="comment">            led_array[4] = 4;*/</span></span><br><span class="line">            <span class="comment">/*led_array[0] = 31;  </span></span><br><span class="line"><span class="comment">            led_array[1] = 17;   </span></span><br><span class="line"><span class="comment">            led_array[2] = 17;   </span></span><br><span class="line"><span class="comment">            led_array[3] = 17;   </span></span><br><span class="line"><span class="comment">            led_array[4] = 31; */</span></span><br><span class="line"> </span><br><span class="line">            <span class="keyword">var</span> led_matrix_data = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(led_array); </span><br><span class="line"></span><br><span class="line">            led_matrix_state.writeValue(led_matrix_data.buffer)</span><br><span class="line">            .then(<span class="function"><span class="params">_</span> =&gt;</span> &#123;   </span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'LED matrix state changed'</span>);  </span><br><span class="line">                &#125;)  </span><br><span class="line">            .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;   </span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'Error: '</span> + error);   </span><br><span class="line">                alert(<span class="string">'Error: '</span> + error);   <span class="keyword">return</span>;  </span><br><span class="line">                &#125;); </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">readModelNumber</span>(<span class="params"></span>)  // 蓝牙信息服务</span></span><br><span class="line"><span class="function">        </span>&#123;  </span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"readModelNumber"</span>);   </span><br><span class="line">            <span class="comment">// state validation   </span></span><br><span class="line">            <span class="keyword">if</span> (!connected) </span><br><span class="line">            &#123;     </span><br><span class="line">                alert(<span class="string">"Error: Discover and connect to a device before using this function"</span>);     </span><br><span class="line">                <span class="keyword">return</span>;   </span><br><span class="line">            &#125;   </span><br><span class="line">            <span class="keyword">if</span> (!services_discovered) </span><br><span class="line">            &#123;     </span><br><span class="line">                alert(<span class="string">"Error: Service discovery has not yet completed"</span>);     </span><br><span class="line">                <span class="keyword">return</span>;   </span><br><span class="line">            &#125;    </span><br><span class="line">            <span class="keyword">if</span> (!has_device_information_service) </span><br><span class="line">            &#123;     </span><br><span class="line">                alert(<span class="string">"Error: The connected device does not contain the device information service"</span>);     </span><br><span class="line">                <span class="keyword">return</span>;   </span><br><span class="line">            &#125;   </span><br><span class="line">            <span class="keyword">if</span> (!has_model_name_string) </span><br><span class="line">            &#123;     </span><br><span class="line">                alert(<span class="string">"Error: The connected device does not contain the model name string characteristic"</span>);     </span><br><span class="line">                <span class="keyword">return</span>;   </span><br><span class="line">            &#125;   </span><br><span class="line">            </span><br><span class="line">            model_number_string.readValue()</span><br><span class="line">            .then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;   </span><br><span class="line">                data = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(value.buffer);   </span><br><span class="line">                model_number_string = <span class="keyword">new</span> TextDecoder(<span class="string">"utf-8"</span>).decode(data);  </span><br><span class="line">                <span class="built_in">console</span>.log(model_number_string);   </span><br><span class="line">                <span class="built_in">document</span>.getElementById(<span class="string">"model_number"</span>).innerHTML = model_number_string;  </span><br><span class="line">                &#125;)  </span><br><span class="line">            .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;  </span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'Error: '</span> + error);   </span><br><span class="line">                alert(<span class="string">'Error: '</span> + error);   </span><br><span class="line">                <span class="keyword">return</span>;  </span><br><span class="line">                &#125;); </span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">accelerometer</span>(<span class="params"></span>)   //加速度传感器</span></span><br><span class="line"><span class="function"> </span>&#123;  </span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">"accelerometer"</span>);   </span><br><span class="line">     <span class="comment">// state validation   </span></span><br><span class="line">     <span class="keyword">if</span> (!connected) </span><br><span class="line">     &#123;     </span><br><span class="line">         alert(<span class="string">"Error: Discover and connect to a device before using this function"</span>);     </span><br><span class="line">         <span class="keyword">return</span>;   </span><br><span class="line">     &#125;   </span><br><span class="line">     <span class="keyword">if</span> (!services_discovered) </span><br><span class="line">     &#123;     </span><br><span class="line">         alert(<span class="string">"Error: Service discovery has not yet completed"</span>);     </span><br><span class="line">         <span class="keyword">return</span>;  </span><br><span class="line">     &#125;   </span><br><span class="line">     <span class="keyword">if</span> (!has_accelerometer_service) </span><br><span class="line">     &#123;     </span><br><span class="line">         alert(<span class="string">"Error: The connected device does not contain the accelerometer service"</span>);     </span><br><span class="line">         <span class="keyword">return</span>;  </span><br><span class="line">     &#125;   </span><br><span class="line">     <span class="keyword">if</span> (!has_accelerometer_data) </span><br><span class="line">     &#123;      </span><br><span class="line">         alert(<span class="string">"Error: The connected device does not contain the accelerometer_data characteristic"</span>);      </span><br><span class="line">         <span class="keyword">return</span>;   </span><br><span class="line">     &#125;   </span><br><span class="line"> </span><br><span class="line">     accelerometer_data.readValue()</span><br><span class="line">    .then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">      buffer = value.buffer;</span><br><span class="line">      dataview = <span class="keyword">new</span> <span class="built_in">DataView</span>(buffer);</span><br><span class="line">      X = dataview.getUint16(<span class="number">0</span>, <span class="literal">true</span>);</span><br><span class="line">      Y = dataview.getUint16(<span class="number">2</span>, <span class="literal">true</span>);</span><br><span class="line">      Z = dataview.getUint16(<span class="number">4</span>, <span class="literal">true</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"X="</span> + X + <span class="string">", Y="</span> + Y + <span class="string">", Z+"</span> + Z);</span><br><span class="line">      <span class="built_in">document</span>.getElementById(<span class="string">"ac_data"</span>).innerHTML = <span class="string">"X="</span> + X + <span class="string">", Y="</span> + Y + <span class="string">",Z="</span> + Z;</span><br><span class="line">        &#125;)  </span><br><span class="line">    .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;  </span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Error: '</span> + error);   </span><br><span class="line">        alert(<span class="string">'Error: '</span> + error);   </span><br><span class="line">        <span class="keyword">return</span>;  </span><br><span class="line">        &#125;); </span><br><span class="line">        </span><br><span class="line">       </span><br><span class="line"> &#125;  </span><br><span class="line"> </span><br><span class="line">        &lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure><p>UI界面设计部分</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>  Status</span><br><span class="line">      <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span>&gt;</span>     <span class="tag">&lt;<span class="name">b</span>&gt;</span>Connected<span class="tag">&lt;/<span class="name">b</span>&gt;</span>   <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span>&gt;</span>     <span class="tag">&lt;<span class="name">b</span>&gt;</span>Service Discovery Completed<span class="tag">&lt;/<span class="name">b</span>&gt;</span>   <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span> <span class="attr">id</span>=<span class="string">"status_connected"</span>&gt;</span> false <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">td</span> <span class="attr">id</span>=<span class="string">"status_discovered"</span>&gt;</span> false <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><br><span class="line">          Device Discovery or Disconnect</span><br><span class="line">      <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span> = <span class="string">"btn_scan"</span> <span class="attr">onclick</span>=<span class="string">"discoverOrdisconnectDevices()"</span>&gt;</span>Start scan<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Reading and Writing<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Write Characteristic - Randomise Lights<span class="tag">&lt;/<span class="name">h3</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn_write"</span> <span class="attr">onclick</span>=<span class="string">"randomLEDs()"</span>&gt;</span>Randomise LEDs<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Read Characteristic - Model number<span class="tag">&lt;/<span class="name">h3</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn_read"</span> <span class="attr">onclick</span>=<span class="string">"readModelNumber()"</span>&gt;</span>Read Model number<span class="tag">&lt;/<span class="name">button</span>&gt;</span> </span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"model_number"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>accelerometer_data<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn_readAC"</span> <span class="attr">onclick</span>=<span class="string">"accelerometer()"</span>&gt;</span>Read accelerometer_data<span class="tag">&lt;/<span class="name">button</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"ac_data"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>Reading and Writing Characteristics</title>
    <link href="http://yoursite.com/2020/06/21/Reading-and-Writing-Characteristics/"/>
    <id>http://yoursite.com/2020/06/21/Reading-and-Writing-Characteristics/</id>
    <published>2020-06-20T23:54:23.000Z</published>
    <updated>2020-06-21T00:30:35.860Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><ol><li><p>交互界面</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Reading and Writing<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>Write Characteristic - Randomise Lights<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span> = <span class="string">"btn_write"</span> <span class="attr">onclick</span> = <span class="string">"radomLEDs()"</span>&gt;</span>Randomise LEDs<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>功能实现</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">randomLEDs</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"randomLEDs"</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//state validation</span></span><br><span class="line">    <span class="keyword">if</span>(!connected)</span><br><span class="line">    &#123;</span><br><span class="line">        alert(<span class="string">"Error: Discover and connect to a device before using this function"</span>);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!services_discovered)</span><br><span class="line">        &#123;</span><br><span class="line">            alert(<span class="string">"Error: Service discovery has not yet completed"</span>);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">if</span>(!has_led_service)</span><br><span class="line">        &#123;</span><br><span class="line">            alert(<span class="string">"Error: Service discovery has not yet completed"</span>);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">     <span class="keyword">if</span>(!has_led_matrix_state)</span><br><span class="line">        &#123;</span><br><span class="line">            alert(<span class="string">"Error: The connected device does not contain the LED service"</span>);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">var</span> led_array = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//Math.radom():0-1    Math.floor(x) : 返回小于等于x 的最大整数</span></span><br><span class="line">    led_array[<span class="number">0</span>] = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">32</span>);</span><br><span class="line">    led_array[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    led_array[<span class="number">2</span>] = <span class="number">2</span>;</span><br><span class="line">    led_array[<span class="number">3</span>] = <span class="number">3</span>;</span><br><span class="line">    led_array[<span class="number">4</span>] = <span class="number">4</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> led_matrix_data = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(led_array);</span><br><span class="line">    </span><br><span class="line">    led_matrix_state.writeValue(led_martix_data.buffer)</span><br><span class="line">    .then(<span class="function"><span class="params">_</span> =&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'LED matrix state changed'</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function"><span class="params">error</span> =&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Error: '</span> + error);</span><br><span class="line">        alert(<span class="string">'Error: '</span> + error);<span class="keyword">return</span> ;</span><br><span class="line">    &#125;).</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>Service Characteristic</title>
    <link href="http://yoursite.com/2020/06/21/Service-Characteristic/"/>
    <id>http://yoursite.com/2020/06/21/Service-Characteristic/</id>
    <published>2020-06-20T23:17:49.000Z</published>
    <updated>2020-06-21T00:03:06.867Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>一、服务、特性的概念</p><p>开发板可提供多个服务，一个服务中可提供多个特性。例如开发板可提供小灯服务。服务可提供小灯亮，小灯灭，呼吸灯，流水灯等特性。</p><p>二、服务、特性的获取</p><ol><li>功能实现</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//presence of services and characteristics</span></span><br><span class="line"><span class="keyword">var</span> has_accelerometer_service = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> has_accelerometer_data = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> has_led_service = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> has_led_martix_state = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> has_device_information_service = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> has_model_name_string = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//services UUID</span></span><br><span class="line">ACCELEROMETER_SERVICE = <span class="string">'e95d0753-251d-470a-a062-fa1922dfa9a8'</span>;</span><br><span class="line">LED_SERVICE = <span class="string">'e95dd91d-251d-470a-a062-fa1922dfa9a8'</span>;</span><br><span class="line">DEVICE_INFORMATION_SERVICE = <span class="string">'0000180a-0000-1000-8000-00805f9b34fb'</span>;</span><br><span class="line"><span class="comment">//characteristic UUID</span></span><br><span class="line">ACCELEROMETER_DATA = <span class="string">'e95dca4b-251d-470a-a062-fa1922dfa9a8'</span>;</span><br><span class="line">LED_MATRIX_STATE = <span class="string">'e95d8b88-251d-470a-a062-fa1922dfa9a8'</span>;</span><br><span class="line">MODEL_NUMBER_STRING = <span class="string">'00002a24-0000-1000-8000-00805f9b34fb'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">discoverSvcsAndChars</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"discoverSvcsAndChars server= "</span> + connected_server);</span><br><span class="line">connected_server.getPrimaryServices().then(<span class="function"><span class="params">services</span> =&gt;</span></span><br><span class="line">&#123;</span><br><span class="line">has_accelerometer_service = <span class="literal">false</span>;</span><br><span class="line">has_led_service = <span class="literal">false</span>;</span><br><span class="line">has_device_information_service = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">services_discovered = <span class="number">0</span>;</span><br><span class="line">services_count = <span class="literal">false</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"Got "</span> + services_count);</span><br><span class="line"></span><br><span class="line">services.forEach(<span class="function"><span class="params">service</span> =&gt;</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(service.uuid == ACCELEROMETER_SERVICE)</span><br><span class="line">&#123;</span><br><span class="line">has_accelerometer_service = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(service.uuid == LED_SERVICE)</span><br><span class="line">&#123;</span><br><span class="line">has_led_service = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(service.uuid == DEVICE_INFORMATION_SERVICE)</span><br><span class="line">&#123;</span><br><span class="line">has_device_information_service = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Getting Characteristics for service '</span> + service.uuid);</span><br><span class="line">service.getCharacteristics()</span><br><span class="line">.then(<span class="function"><span class="params">Characteristics</span> =&gt;</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">' &gt; Service: '</span> + service.uuid);</span><br><span class="line">services_discovered++;</span><br><span class="line">characteristics_discovered = <span class="number">0</span>;</span><br><span class="line">characteristics_count = characteristics.length;</span><br><span class="line">characteristics.forEach(<span class="function"><span class="params">characteristics</span> =&gt;</span> </span><br><span class="line">&#123;</span><br><span class="line">characteristics_discovered++;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">' &gt;&gt; Characteristic: '</span> + characteristics.uuid);</span><br><span class="line"><span class="keyword">if</span>(characteristics.uuid == ACCELEROMETER_DATA)</span><br><span class="line">&#123;</span><br><span class="line">accelerometer_Data = characteristic;</span><br><span class="line">has_accelerometer_data = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(characteristics.uuid == LED_MATRIX_STATE)</span><br><span class="line">&#123;</span><br><span class="line">led_matrix_state = characteristic;</span><br><span class="line">has_led_matrix_state = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(characteristics.uuid == MODEL_NUMBER_STRING)</span><br><span class="line">&#123;</span><br><span class="line">model_number_string = characteristic;</span><br><span class="line">has_model_name_string = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(service_discovered == service_count &amp;&amp; characteristics_discovered == characteristics_count)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"FINFISHED DISCOVERY"</span>);</span><br><span class="line">setDiscoveryStatus(<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>交互界面</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">""</span> <span class="attr">cellspacing</span>=<span class="string">""</span> <span class="attr">cellpadding</span>=<span class="string">""</span> <span class="attr">border</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span> <span class="attr">id</span>=<span class="string">"status_connected"</span>&gt;</span>false<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>Service Discovery Completed<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>为HEXO添加额外功能</title>
    <link href="http://yoursite.com/2020/05/24/%E4%B8%BAHEXO%E6%B7%BB%E5%8A%A0%E9%A2%9D%E5%A4%96%E5%8A%9F%E8%83%BD/"/>
    <id>http://yoursite.com/2020/05/24/%E4%B8%BAHEXO%E6%B7%BB%E5%8A%A0%E9%A2%9D%E5%A4%96%E5%8A%9F%E8%83%BD/</id>
    <published>2020-05-24T15:01:51.000Z</published>
    <updated>2020-05-25T06:24:35.565Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="一、添加通讯以及美化背景"><a href="#一、添加通讯以及美化背景" class="headerlink" title="一、添加通讯以及美化背景"></a>一、添加通讯以及美化背景</h2><h3 id="1-丰富背景样式"><a href="#1-丰富背景样式" class="headerlink" title="1.丰富背景样式"></a>1.丰富背景样式</h3><h4 id="1-浮层样式集合"><a href="#1-浮层样式集合" class="headerlink" title="1.浮层样式集合"></a>1.浮层样式集合</h4><p>（花瓣飘落、文字，爱心，连线，飘动的彩带）</p><p>修改 \Sakura\layout_partial 目录下的footer.ejs</p><h4 id="2-背景切换和访问量统计"><a href="#2-背景切换和访问量统计" class="headerlink" title="2.背景切换和访问量统计"></a>2.背景切换和访问量统计</h4><p>背景切换(pages功能)和访问量统计（网页计数）</p><h3 id="2-在线通讯"><a href="#2-在线通讯" class="headerlink" title="2.在线通讯"></a>2.在线通讯</h3><p>hexo+DaoVoice实现网页在线通讯功能</p><p>1.首先在DaoVoice官网上注册一个账号</p><p>2.在应用设置，安装到往回走哪，仅匿名用户下获得ID，我们采用JS语言，选择对应复制</p><p>3.在 sakura_config.yml中末尾加上</p><p>4.在 \sakura\layout_partial 目录下的footer.ejs末尾加上：</p><p>（依然是加快网站访问速度，将head的引用加在了foot中）</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>HEXO主题优化</title>
    <link href="http://yoursite.com/2020/05/24/HEXO%E4%B8%BB%E9%A2%98%E4%BC%98%E5%8C%96/"/>
    <id>http://yoursite.com/2020/05/24/HEXO%E4%B8%BB%E9%A2%98%E4%BC%98%E5%8C%96/</id>
    <published>2020-05-24T15:01:05.000Z</published>
    <updated>2020-05-25T06:16:40.671Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h2 id="一、基本主题修改"><a href="#一、基本主题修改" class="headerlink" title="一、基本主题修改"></a>一、基本主题修改</h2><h3 id="1-顶部站点名字"><a href="#1-顶部站点名字" class="headerlink" title="1.顶部站点名字"></a>1.顶部站点名字</h3><p>这个是在 <strong>/themes/sakura/config.yml</strong> 这个配置文件中修改</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;site name</span><br><span class="line">prefixName: AoTeMan</span><br><span class="line">siteName: yremp</span><br><span class="line">url: https:&#x2F;&#x2F;yremp2.github.io&#x2F;</span><br></pre></td></tr></table></figure><p>其中，URL是点击后跳转地址</p><p>由于我在 <strong>/themes/sakura/source/css/style.css</strong> 下自改了样式表去掉了 <strong>prefixName</strong> ,所以图上是没有的</p><p>如果大家想修改相关的样式也可以去这个CSS文件中定义，这个文件是主要的CSS文件，大部分的样式都是由这个文件定义的。</p><h3 id="2-顶部导航栏"><a href="#2-顶部导航栏" class="headerlink" title="2.顶部导航栏"></a>2.顶部导航栏</h3><p>这个在主题使用教程里面，作者好像是给出来了，大家可以仔细去阅读以下（当初我就是没有认真阅读爬了不少坑）这也是 <strong>/themes/sakura/config.yml</strong> 这个配置文件里面定义的</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">menus:</span><br><span class="line">首页:&#123;path: &#x2F;, fa: fas fa_home fa-1x&#125;</span><br><span class="line">归档:&#123;&#125;</span><br><span class="line">清单:&#123;&#125;</span><br><span class="line">留言板:&#123;&#125;</span><br><span class="line">友人帐:&#123;&#125;</span><br></pre></td></tr></table></figure><p>前面的path是网页路径，这个不建议修改，但可以修改。后面的如: <strong>fa; fas fa-home fa-1x</strong> 这个就是对应的图标设置，关于这个图标大家可以去 <strong>fontawesome</strong>  看教程以及选择自己习惯的图标，导航栏下拉菜单的图标修改和导航栏相同。</p><h3 id="3-头像"><a href="#3-头像" class="headerlink" title="3.头像"></a>3.头像</h3><p>很多小伙伴拿到主题后第一时间肯定是修改这个头像，毕竟这个比较能代表自己，那么这个头像配置在那？如果有经验的小伙伴肯定是自己就能找到，这个配置在：</p><p><strong>/themes/sakura/config.yml</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cdn: https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;yremp&#x2F;cdn&amp;2.1.5</span><br><span class="line">avatar: &#x2F;img&#x2F;custom&#x2F;head.jpg</span><br></pre></td></tr></table></figure><p>我这个是使用cdn后的路径，也可以修改为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">avatar:https:&#x2F;&#x2F;cdn.jsdelivrnet&#x2F;gh&#x2F;yremp&#x2F;cdn@2.1.5&#x2F;img&#x2F;custom&#x2F;head.jpg</span><br></pre></td></tr></table></figure><h3 id="4-社交栏"><a href="#4-社交栏" class="headerlink" title="4.社交栏"></a>4.社交栏</h3><h4 id="1-个性签名"><a href="#1-个性签名" class="headerlink" title="1.个性签名"></a>1.个性签名</h4><p>这个子啊 <strong>/themes/sakura/config.yml</strong> 里面，由如下代码定义</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">description: 日出江花红胜火，春来江水绿如蓝。</span><br></pre></td></tr></table></figure><p>直接修改即可</p><p>2.内容</p><p>没错仍然是 <strong>/themes/sakura/config.yml</strong>这个文件，找到</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#social  url ,img PC端配置</span><br><span class="line">social:</span><br><span class="line">github:&#123;&#125;</span><br><span class="line">wangyiyun:&#123;&#125;</span><br><span class="line">zhihu:&#123;&#125;</span><br><span class="line">qq:&#123;&#125;</span><br><span class="line">wechat:&#123;&#125;</span><br><span class="line"></span><br><span class="line">#social url, img移动端配置</span><br><span class="line">msocial:</span><br><span class="line">    github:&#123;&#125;</span><br><span class="line">    weibo:&#123;&#125;</span><br><span class="line">    qq:&#123;&#125;</span><br></pre></td></tr></table></figure><p>前面URL对应点击后跳转地址，后面是图标路径，注意这个不是本地路径，是使用了cdn后的路径，上一栏头像设置中游介绍。至于PC和移动端注释已经标示了，就不多做介绍。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>内心强大，是治愈一切的良药</title>
    <link href="http://yoursite.com/2020/04/01/%E5%86%85%E5%BF%83%E5%BC%BA%E5%A4%A7%EF%BC%8C%E6%98%AF%E6%B2%BB%E6%84%88%E4%B8%80%E5%88%87%E7%9A%84%E8%89%AF%E8%8D%AF/"/>
    <id>http://yoursite.com/2020/04/01/%E5%86%85%E5%BF%83%E5%BC%BA%E5%A4%A7%EF%BC%8C%E6%98%AF%E6%B2%BB%E6%84%88%E4%B8%80%E5%88%87%E7%9A%84%E8%89%AF%E8%8D%AF/</id>
    <published>2020-04-01T13:11:23.000Z</published>
    <updated>2020-04-01T13:30:28.876Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="内心强大，是治愈一切的良药"><a href="#内心强大，是治愈一切的良药" class="headerlink" title="内心强大，是治愈一切的良药"></a>内心强大，是治愈一切的良药</h1><ul><li><h2 id="选择坚强，而不是选择仇恨"><a href="#选择坚强，而不是选择仇恨" class="headerlink" title="选择坚强，而不是选择仇恨"></a>选择坚强，而不是选择仇恨</h2><p>今年的1月份，陶勇医生在门诊接诊时，一名男子持刀将他砍成重伤，幸亏旁边有见义勇为的护士、医生和患者阻拦行凶，只差那么一地啊你但，陶勇医生可能性命都不保。</p><p>他在重症病房呆了几个月，从鬼门关里走了一遭，左手伤势严重，每天还要忍受着复健的疼痛，但他说：“我自己遇到劫难，但我不想把自己埋在仇恨中”</p><p>医者仁心，他把痛苦化成一种更大的动力，鼓励自己前进，这样的格局和胸襟，让人敬佩</p></li><li><h2 id="选择乐观而不是坐以待毙"><a href="#选择乐观而不是坐以待毙" class="headerlink" title="选择乐观而不是坐以待毙"></a>选择乐观而不是坐以待毙</h2><p>前几天看到一则新闻，那个误入武汉的东北小伙儿，终于能回家了。</p><p>今年的2月份，他本想去长沙，却误入了外地去武汉的车，到达的第二天，武汉封城。</p><p>为了不露宿街头，这个聪明的小伙儿就想在当地找一份工作，看到武汉第一医院招募志愿者，他决定在医院隔离病区做“清洁工”。</p><p>为了不让父母担心，他隐瞒了自己误入武汉的情况，谎称自己滞留在了长沙。东北人的幽默乐观精神在这里发挥出了极致，工作辛苦又危险，但他懂得苦中作乐。</p><p>就像有句话所说：“人生就如同一场自己与自己的较量，遭遇不幸时，是积极，还是消极，直接决定着最后的结局。”</p></li></ul><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>当你遇到不顺心的问题和麻烦时，你的心态将决定你能在这条路上走多远，“性格决定命运”这不是一句空话。一个真正强大的人，会在生活之中处之泰然，无所畏惧，因为他只道，无论外界有多少诱惑和挫折，所有的这一切，终会过去的。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
    
      <category term="随笔" scheme="http://yoursite.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>HEXO博客主题更换及美化</title>
    <link href="http://yoursite.com/2020/03/22/HEXO%E5%8D%9A%E5%AE%A2%E4%B8%BB%E9%A2%98%E6%9B%B4%E6%8D%A2/"/>
    <id>http://yoursite.com/2020/03/22/HEXO%E5%8D%9A%E5%AE%A2%E4%B8%BB%E9%A2%98%E6%9B%B4%E6%8D%A2/</id>
    <published>2020-03-22T02:48:57.000Z</published>
    <updated>2020-04-03T02:09:14.062Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>#更换HEXO博客页面的主题</p><h2 id="一、下载HEXO主题"><a href="#一、下载HEXO主题" class="headerlink" title="一、下载HEXO主题"></a>一、下载HEXO主题</h2><p>以next主题为例<br>在根目录下运行“git bash here”<br>输入”git clone <a href="https://github.com/iissnan/hexo-theme-next.git" target="_blank" rel="noopener">https://github.com/iissnan/hexo-theme-next.git</a> themes/next”，然后回车<br>等待主题的自动下载完成</p><h2 id="二、设置HEXO主题"><a href="#二、设置HEXO主题" class="headerlink" title="二、设置HEXO主题"></a>二、设置HEXO主题</h2><ul><li>在根目录下用记事本打开config.yml</li><li>找到”theme:”</li><li>输入“ next”</li><li>保存退出</li><li>在根目录下运行“git bash here”</li><li>输入“hexo s”</li><li>在本地查看新建的主题</li></ul><p>##主题修改完成</p><h2 id="三、主题美化"><a href="#三、主题美化" class="headerlink" title="三、主题美化"></a>三、主题美化</h2><p>搜索引擎输入“HEXO的next主题美化”<br>自行寻找答案</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
    
      <category term="建立hexo博客入门" scheme="http://yoursite.com/tags/%E5%BB%BA%E7%AB%8Bhexo%E5%8D%9A%E5%AE%A2%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title>本地HEXO上传至公共网页</title>
    <link href="http://yoursite.com/2020/03/21/%E6%9C%AC%E5%9C%B0HEXO%E4%B8%8A%E4%BC%A0%E8%87%B3%E5%85%AC%E5%85%B1%E7%BD%91%E9%A1%B5/"/>
    <id>http://yoursite.com/2020/03/21/%E6%9C%AC%E5%9C%B0HEXO%E4%B8%8A%E4%BC%A0%E8%87%B3%E5%85%AC%E5%85%B1%E7%BD%91%E9%A1%B5/</id>
    <published>2020-03-21T13:03:40.000Z</published>
    <updated>2020-04-03T02:02:20.578Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>按照以下步骤，可将本地建立好的HEXO博客上传到公共网页中：</p><h2 id="一、创建github账号"><a href="#一、创建github账号" class="headerlink" title="一、创建github账号"></a>一、创建github账号</h2><p>搜索引擎搜索“github”，按照流程正常创建即可</p><h2 id="二、在自己的github账号中创建一个存储库"><a href="#二、在自己的github账号中创建一个存储库" class="headerlink" title="二、在自己的github账号中创建一个存储库"></a>二、在自己的github账号中创建一个存储库</h2><p><img src="/2020/03/21/%E6%9C%AC%E5%9C%B0HEXO%E4%B8%8A%E4%BC%A0%E8%87%B3%E5%85%AC%E5%85%B1%E7%BD%91%E9%A1%B5/img1.jpg" alt>   </p><h3 id="选择new"><a href="#选择new" class="headerlink" title="选择new"></a>选择new</h3><p><img src="/2020/03/21/%E6%9C%AC%E5%9C%B0HEXO%E4%B8%8A%E4%BC%A0%E8%87%B3%E5%85%AC%E5%85%B1%E7%BD%91%E9%A1%B5/img2.jpg" alt></p><h3 id="只填写“repository-name”和”Description”两个文本框"><a href="#只填写“repository-name”和”Description”两个文本框" class="headerlink" title="只填写“repository  name”和”Description”两个文本框"></a>只填写“repository  name”和”Description”两个文本框</h3><p>“repository  name”填写格式：github用户名.github.io<br>“Description”填写格式：“我的第一个博客”</p><h3 id="然后点击“create-responsitory”"><a href="#然后点击“create-responsitory”" class="headerlink" title="然后点击“create responsitory”"></a>然后点击“create responsitory”</h3><h3 id="将新页面中的“SSH”复制"><a href="#将新页面中的“SSH”复制" class="headerlink" title="将新页面中的“SSH”复制"></a>将新页面中的“SSH”复制</h3><h3 id="本地”blog”文件夹下打开“-config-yml”"><a href="#本地”blog”文件夹下打开“-config-yml”" class="headerlink" title="本地”blog”文件夹下打开“_config.yml”"></a>本地”blog”文件夹下打开“_config.yml”</h3><ul><li><p>找到“type:”，输入” git”</p></li><li><p>下一行输入刚刚复制的SSH</p></li><li><p>找到”branch:”，输入”master”</p></li><li><p>保存记事本，关闭</p></li></ul><h3 id="在根目录下运行”git-bash-here”"><a href="#在根目录下运行”git-bash-here”" class="headerlink" title="在根目录下运行”git bash here”"></a>在根目录下运行”git bash here”</h3><ul><li>执行”hexo d”命令，上传即可</li></ul><blockquote><p>此处会报错”FATAL: not remote to a repository”</p></blockquote><p>登录GITHUB界面</p><blockquote><p>点击右上角图标,点击    Settings  选项</p></blockquote><p><img src="/2020/03/21/%E6%9C%AC%E5%9C%B0HEXO%E4%B8%8A%E4%BC%A0%E8%87%B3%E5%85%AC%E5%85%B1%E7%BD%91%E9%A1%B5/img3.jpg" alt></p><blockquote><p>左边列表选择SSH and GPG keys</p></blockquote><p><img src="/2020/03/21/%E6%9C%AC%E5%9C%B0HEXO%E4%B8%8A%E4%BC%A0%E8%87%B3%E5%85%AC%E5%85%B1%E7%BD%91%E9%A1%B5/img4.jpg" alt></p><blockquote><p>点击New SSH Keys</p></blockquote><p><img src="/2020/03/21/%E6%9C%AC%E5%9C%B0HEXO%E4%B8%8A%E4%BC%A0%E8%87%B3%E5%85%AC%E5%85%B1%E7%BD%91%E9%A1%B5/img5.jpg" alt></p><p>打开本地路径：C:\Users\john.ssh</p><p>删除其中的id_rsa.pub和id_rsa文件</p><p>在git 当中运行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure><p>将重新生成出的id_rsa.pub文件内容复制到github中的这里</p><p><img src="/2020/03/21/%E6%9C%AC%E5%9C%B0HEXO%E4%B8%8A%E4%BC%A0%E8%87%B3%E5%85%AC%E5%85%B1%E7%BD%91%E9%A1%B5/img6.jpg" alt></p><p>点击Add SSH Key  即可</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
    
      <category term="建立hexo博客入门" scheme="http://yoursite.com/tags/%E5%BB%BA%E7%AB%8Bhexo%E5%8D%9A%E5%AE%A2%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title>写第一篇自己的博客</title>
    <link href="http://yoursite.com/2020/03/21/%E5%86%99%E7%AC%AC%E4%B8%80%E7%AF%87%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/"/>
    <id>http://yoursite.com/2020/03/21/%E5%86%99%E7%AC%AC%E4%B8%80%E7%AF%87%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/</id>
    <published>2020-03-21T12:53:57.000Z</published>
    <updated>2020-04-03T02:06:20.468Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>按照以下步骤写自己的第一篇博客：</p><h2 id="一、新建博客"><a href="#一、新建博客" class="headerlink" title="一、新建博客"></a>一、新建博客</h2><h2 id="1-打开“blog”文件夹，在文件夹根目录右键选择”git-bash-here”"><a href="#1-打开“blog”文件夹，在文件夹根目录右键选择”git-bash-here”" class="headerlink" title="(1)打开“blog”文件夹，在文件夹根目录右键选择”git bash here”"></a>(1)打开“blog”文件夹，在文件夹根目录右键选择”git bash here”</h2><p>运行命令“   hexo new “filename”     ”命令<br>其中”filename”，是你想为这篇博文起的名字</p><p><img src="/2020/03/21/%E5%86%99%E7%AC%AC%E4%B8%80%E7%AF%87%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/file.png" alt></p><h3 id="2-打开“blog”文件夹下的子文件夹”source”文件夹，在打开”-partial”文件夹，找到“filename-md”形式的博文文件，用记事本打开"><a href="#2-打开“blog”文件夹下的子文件夹”source”文件夹，在打开”-partial”文件夹，找到“filename-md”形式的博文文件，用记事本打开" class="headerlink" title="(2)打开“blog”文件夹下的子文件夹”source”文件夹，在打开”_partial”文件夹，找到“filename.md”形式的博文文件，用记事本打开"></a>(2)打开“blog”文件夹下的子文件夹”source”文件夹，在打开”_partial”文件夹，找到“filename.md”形式的博文文件，用记事本打开</h3><p>博文的内容在最后一行的下一行输入，<br>对输入好的内容进行保存，返回根目录</p><h3 id="3-同上打开”git-bash-here”-运行”hexo-s”-在本地预览即可看到自己的第一篇博文"><a href="#3-同上打开”git-bash-here”-运行”hexo-s”-在本地预览即可看到自己的第一篇博文" class="headerlink" title="(3)同上打开”git bash here”,运行”hexo s”,在本地预览即可看到自己的第一篇博文"></a>(3)同上打开”git bash here”,运行”hexo s”,在本地预览即可看到自己的第一篇博文</h3>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
    
      <category term="建立hexo博客入门" scheme="http://yoursite.com/tags/%E5%BB%BA%E7%AB%8Bhexo%E5%8D%9A%E5%AE%A2%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title>五步完成本地HEXO建立</title>
    <link href="http://yoursite.com/2020/03/21/%E6%9C%AC%E5%9C%B0%E5%BB%BA%E7%AB%8Bhexo%E9%A1%B9%E7%9B%AE%E6%8A%A5%E9%94%99%E8%A7%A3%E6%9E%90/"/>
    <id>http://yoursite.com/2020/03/21/%E6%9C%AC%E5%9C%B0%E5%BB%BA%E7%AB%8Bhexo%E9%A1%B9%E7%9B%AE%E6%8A%A5%E9%94%99%E8%A7%A3%E6%9E%90/</id>
    <published>2020-03-21T12:34:36.000Z</published>
    <updated>2020-04-03T01:30:14.480Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>创建本地项目进程非常简单，按照下面方式进行即可成功在本地创建hexo博客</p><h2 id="一、搜索引擎搜索“git下载”-gt-进行git-的下载和安装"><a href="#一、搜索引擎搜索“git下载”-gt-进行git-的下载和安装" class="headerlink" title="一、搜索引擎搜索“git下载”   -&gt;  进行git 的下载和安装"></a>一、搜索引擎搜索“git下载”   -&gt;  进行git 的下载和安装</h2><p>如果觉得官网下载慢的可以用下面的网址：<a href="https://npm.taobao.org/mirrors/git-for-windows/" target="_blank" rel="noopener">https://npm.taobao.org/mirrors/git-for-windows/</a></p><p>根据系统选择你下载的版本，最上面的为最新版本</p><p>​                                                                </p><h2 id="二、搜索引擎搜索“node-js下载”-gt-进行node-js的下载和安装"><a href="#二、搜索引擎搜索“node-js下载”-gt-进行node-js的下载和安装" class="headerlink" title="二、搜索引擎搜索“node.js下载”   -&gt;  进行node.js的下载和安装"></a>二、搜索引擎搜索“node.js下载”   -&gt;  进行node.js的下载和安装</h2><p>根据步骤进行下载安装即可，同GIT安装，一路NEXT</p><h2 id="三、本地运行cmd命令窗口"><a href="#三、本地运行cmd命令窗口" class="headerlink" title="三、本地运行cmd命令窗口"></a>三、本地运行cmd命令窗口</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm -v</span><br></pre></td></tr></table></figure><p>​    分别运行以上两行命令，接着运行“hexo -v”如果显示版本号，则说明确定“git，node.js”均成功下载</p><p>​                                                                    <img src="/2020/03/21/%E6%9C%AC%E5%9C%B0%E5%BB%BA%E7%AB%8Bhexo%E9%A1%B9%E7%9B%AE%E6%8A%A5%E9%94%99%E8%A7%A3%E6%9E%90/-v.png" alt></p><h2 id="三、安装HEXO"><a href="#三、安装HEXO" class="headerlink" title="三、安装HEXO"></a>三、安装HEXO</h2><p>(1)选择一个硬盘，在其根目录下创建一个“blog”文件夹，打开该文件夹</p><p>(2)在“blog”文件夹中单击右键，选择“git bash here” -&gt; 运行一下命令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo</span><br></pre></td></tr></table></figure><p>接着运行“hexo -v”如果显示版本号，则说明已经成功安装</p><p>​                                                                    <img src="/2020/03/21/%E6%9C%AC%E5%9C%B0%E5%BB%BA%E7%AB%8Bhexo%E9%A1%B9%E7%9B%AE%E6%8A%A5%E9%94%99%E8%A7%A3%E6%9E%90/hexo.png" alt>                                                                </p><h2 id="四、HEXO初始化"><a href="#四、HEXO初始化" class="headerlink" title="四、HEXO初始化"></a>四、HEXO初始化</h2><p>以上都成功后，输入命令“hexo init”</p><h2 id="五、本地HEXO查看"><a href="#五、本地HEXO查看" class="headerlink" title="五、本地HEXO查看"></a>五、本地HEXO查看</h2><p>运行命令”hexo s”，复制里面的http本地地址，用浏览器打开，即可能够看到新建的HEXO博客</p><p>​                                                                    <img src="/2020/03/21/%E6%9C%AC%E5%9C%B0%E5%BB%BA%E7%AB%8Bhexo%E9%A1%B9%E7%9B%AE%E6%8A%A5%E9%94%99%E8%A7%A3%E6%9E%90/s.png" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
    
      <category term="建立hexo博客入门" scheme="http://yoursite.com/tags/%E5%BB%BA%E7%AB%8Bhexo%E5%8D%9A%E5%AE%A2%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title>welcome the new world</title>
    <link href="http://yoursite.com/2020/03/15/the-adult-s-world/"/>
    <id>http://yoursite.com/2020/03/15/the-adult-s-world/</id>
    <published>2020-03-15T03:04:48.000Z</published>
    <updated>2020-03-29T07:07:46.825Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=446935665&auto=1&height=66"></iframe>Life will be better,but you will not.Just because you are still in your dream lingering what you want to stay.Time will be end,but you will not.Just because you finished your dream not just on the bed imagine.Today is March 15,2020.In your world,It is nothing for any other.It is important for you to treasure time.But don't forget that everyone all same with you.We all need do the best ourselves in our lives try our best.To protect who we love and want to protect.Then the society was born.So,tell me.What's the most important thing for everyone? Time.Your lives time.Even if you can only do one thing in your life, help a small number of people.You should be contented.After all, you are not only one in the world. Thanks for your help.Trust me,the world can remember everyone who give benefit for person.<p><img src="/2020/03/15/the-adult-s-world/timg.jpg" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
    
      <category term="web" scheme="http://yoursite.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2020/03/14/hello-world/"/>
    <id>http://yoursite.com/2020/03/14/hello-world/</id>
    <published>2020-03-14T08:01:34.211Z</published>
    <updated>2020-03-29T07:17:43.129Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
    
  </entry>
  
</feed>
